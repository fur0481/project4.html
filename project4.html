<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedCare Pro - Dental Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: #4a6fc0;
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-toggle {
            display: flex;
            border-radius: 8px;
            overflow: hidden;
            background: #f0f4ff;
        }
        
        .toggle-btn {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .toggle-btn.active {
            background: #4a6fc0;
            color: white;
        }
        
        .form {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .form.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #4a6fc0;
            outline: none;
        }
        
        .btn {
            background: #4a6fc0;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
        }
        
        .btn:hover {
            background: #3b5aa6;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }
        
        .form-footer a {
            color: #4a6fc0;
            text-decoration: none;
            font-weight: 600;
        }
        
        .form-footer a:hover {
            text-decoration: underline;
        }
        
        .verification-step {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .verification-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
        }
        
        .resend {
            text-align: center;
            margin-top: 15px;
            color: #4a6fc0;
            cursor: pointer;
            font-size: 14px;
        }
        
        .doctors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .doctor-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .doctor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .doctor-card.selected {
            border-color: #4a6fc0;
            background-color: #f0f4ff;
        }
        
        .doctor-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            color: white;
            font-size: 12px;
            text-align: center;
        }
        
        .doctor-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .doctor-specialty {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .doctor-experience {
            color: #888;
            font-size: 12px;
            font-style: italic;
        }
        
        .doctor-rating {
            color: #FFD700;
            margin-top: 5px;
        }
        
        .doctor-availability {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 10px;
            padding: 3px 6px;
            border-radius: 10px;
            background: #4caf50;
            color: white;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #4caf50;
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
        }
        
        .error {
            color: #f44336;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .specialty-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .filter-btn {
            padding: 8px 15px;
            background: #f0f4ff;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: #4a6fc0;
            color: white;
            border-color: #4a6fc0;
        }
        
        .search-box {
            margin-bottom: 20px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .time-slot {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .time-slot:hover {
            background: #f0f4ff;
        }
        
        .time-slot.selected {
            background: #4a6fc0;
            color: white;
            border-color: #4a6fc0;
        }
        
        .time-slot.unavailable {
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
            text-decoration: line-through;
        }
        
        /* Confirmation Page Styles */
        .confirmation-page {
            display: none;
        }
        
        .confirmation-icon {
            font-size: 60px;
            color: #4caf50;
            margin-bottom: 15px;
        }
        
        .appointment-info {
            background: #f9faff;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .appointment-info h2 {
            color: #4a6fc0;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .info-item {
            margin-bottom: 15px;
        }
        
        .info-label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
        }
        
        .info-value {
            color: #333;
            font-size: 16px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            background: #4caf50;
            color: white;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .doctor-info {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .instructions {
            background: #e6f7ff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .instructions h3 {
            color: #4a6fc0;
            margin-bottom: 15px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn-primary {
            background: #4a6fc0;
            color: white;
        }
        
        .btn-primary:hover {
            background: #3b5aa6;
        }
        
        .btn-outline {
            background: transparent;
            color: #4a6fc0;
            border: 1px solid #4a6fc0;
        }
        
        .btn-outline:hover {
            background: #f0f4ff;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #666;
            font-size: 14px;
        }
        
        .qr-code {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .map-container {
            margin-top: 25px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .map-placeholder {
            height: 200px;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-weight: 500;
        }

        /* Dental Section Styles */
        .dental-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .section-title {
            font-size: 24px;
            color: #4a6fc0;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
        }
        
        .dental-services {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .service-item {
            background: #f9faff;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #4a6fc0;
        }
        
        .service-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }
        
        .service-desc {
            font-size: 14px;
            color: #666;
        }
        
        .dental-info {
            background: #e6f7ff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .dental-info h3 {
            color: #4a6fc0;
            margin-bottom: 15px;
        }

        /* Dental Page Styles */
        .dental-page {
            display: none;
        }
        
        .dental-hero {
            background: linear-gradient(135deg, #4a6fc0 0%, #3b5aa6 100%);
            color: white;
            padding: 40px 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .dental-hero h2 {
            font-size: 36px;
            margin-bottom: 15px;
        }
        
        .dental-hero p {
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .dental-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .feature-card {
            background: #f9faff;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 40px;
            color: #4a6fc0;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        
        .feature-desc {
            color: #666;
            line-height: 1.5;
        }
        
        .dental-services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .dental-service-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }
        
        .dental-service-card:hover {
            transform: translateY(-5px);
        }
        
        .service-header {
            background: #4a6fc0;
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .service-body {
            padding: 20px;
        }
        
        .service-price {
            font-size: 24px;
            font-weight: 700;
            color: #4a6fc0;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .service-details {
            list-style-type: none;
            margin-bottom: 20px;
        }
        
        .service-details li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .service-details li:last-child {
            border-bottom: none;
        }
        
        .service-details li i {
            color: #4caf50;
            margin-right: 10px;
        }
        
        .service-btn {
            background: #4a6fc0;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
        }
        
        .service-btn:hover {
            background: #3b5aa6;
        }
        
        .dental-testimonials {
            margin-top: 50px;
        }
        
        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .testimonial-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .testimonial-text {
            font-style: italic;
            margin-bottom: 15px;
            color: #555;
            line-height: 1.6;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
        }
        
        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #4a6fc0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .author-info h4 {
            margin-bottom: 5px;
            color: #333;
        }
        
        .author-info p {
            color: #666;
            font-size: 14px;
        }
        
        .back-to-main {
            display: inline-flex;
            align-items: center;
            color: #4a6fc0;
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 20px;
            transition: color 0.3s;
        }
        
        .back-to-main:hover {
            color: #3b5aa6;
            text-decoration: underline;
        }

        /* AI Agent Styles */
        .ai-agent-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .ai-agent-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            font-size: 24px;
        }
        
        .ai-agent-button:hover {
            transform: scale(1.1);
        }
        
        .ai-agent-chat {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        
        .ai-agent-chat.active {
            display: flex;
            animation: slideUp 0.3s;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .ai-agent-header {
            background: #4a6fc0;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .ai-agent-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .ai-agent-close {
            cursor: pointer;
            font-size: 18px;
        }
        
        .ai-agent-messages {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .ai-message {
            background: #f0f4ff;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 85%;
            align-self: flex-start;
            position: relative;
        }
        
        .user-message {
            background: #4a6fc0;
            color: white;
            align-self: flex-end;
        }
        
        .ai-agent-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }
        
        .ai-agent-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }
        
        .ai-agent-send {
            background: #4a6fc0;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .alternative-doctors {
            margin-top: 15px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        .alternative-doctor {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f9f9f9;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .alternative-doctor:hover {
            background: #f0f4ff;
        }
        
        .alternative-doctor-image {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #4a6fc0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            margin-right: 10px;
        }
        
        .alternative-doctor-info {
            flex: 1;
        }
        
        .alternative-doctor-name {
            font-weight: 600;
            font-size: 14px;
        }
        
        .alternative-doctor-specialty {
            font-size: 12px;
            color: #666;
        }
        
        .alternative-doctor-clinic {
            font-size: 12px;
            color: #4a6fc0;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #666;
            font-style: italic;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #666;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* Print Styles */
        @media print {
            body {
                background: white !important;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
                max-width: 100%;
            }
            
            .header {
                background: #4a6fc0 !important;
                -webkit-print-color-adjust: exact;
            }
            
            .btn, .form-toggle, .notification, .actions, .ai-agent-container {
                display: none !important;
            }
            
            .appointment-info, .doctor-info, .instructions, .qr-code, .map-container {
                box-shadow: none;
                border: 1px solid #ddd;
            }
            
            .confirmation-icon {
                color: #4caf50 !important;
                -webkit-print-color-adjust: exact;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .content {
                padding: 20px;
            }
            
            .doctors-grid {
                grid-template-columns: 1fr;
            }
            
            .specialty-filter {
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .doctor-info {
                flex-direction: column;
                text-align: center;
            }
            
            .dental-services {
                grid-template-columns: 1fr;
            }
            
            .dental-features, .dental-services-grid, .testimonials-grid {
                grid-template-columns: 1fr;
            }
            
            .dental-hero h2 {
                font-size: 28px;
            }
            
            .dental-hero p {
                font-size: 16px;
            }
            
            .ai-agent-chat {
                width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-hospital-alt"></i> MedCare Pro Doctor Appointment System</h1>
            <p>Book your appointment online - Advanced, Secure, User-Friendly</p>
        </div>
        
        <div class="content">
            <!-- Main Appointment System -->
            <div class="form-container" id="appointment-system">
                <div class="form-toggle">
                    <div class="toggle-btn active" id="login-toggle">Login</div>
                    <div class="toggle-btn" id="register-toggle">Register</div>
                    <div class="toggle-btn" id="appointment-toggle">Appointment</div>
                    <div class="toggle-btn" id="dental-toggle">Dental Services</div>
                </div>
                
                <form id="login-form" class="form active">
                    <div class="form-group">
                        <label for="login-phone">Phone Number</label>
                        <input type="tel" id="login-phone" placeholder="Enter your phone number" required>
                        <div class="error" id="login-phone-error">Please enter a valid phone number</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required>
                        <div class="error" id="login-password-error">Please enter your password</div>
                    </div>
                    
                    <button type="submit" class="btn">Login</button>
                    
                    <div class="form-footer">
                        <p>Don't have an account? <a href="#" id="go-to-register">Register here</a></p>
                    </div>
                </form>
                
                <form id="register-form" class="form">
                    <div class="form-group">
                        <label for="full-name">Full Name</label>
                        <input type="text" id="full-name" placeholder="Enter your full name" required>
                        <div class="error" id="name-error">Please enter your full name</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-phone">Phone Number</label>
                        <input type="tel" id="register-phone" placeholder="Enter your phone number" required>
                        <div class="error" id="register-phone-error">Please enter a valid phone number</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" placeholder="Create a password" required>
                        <div class="error" id="password-error">Password must be at least 6 characters</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm your password" required>
                        <div class="error" id="confirm-password-error">Passwords do not match</div>
                    </div>
                    
                    <button type="submit" class="btn">Register</button>
                    
                    <div class="form-footer">
                        <p>Already have an account? <a href="#" id="go-to-login">Login here</a></p>
                    </div>
                </form>
                
                <form id="appointment-form" class="form">
                    <h3 style="margin-bottom: 20px; color: #4a6fc0;">Select a Doctor</h3>
                    
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="doctor-search" placeholder="Search doctors by name or specialty...">
                    </div>
                    
                    <div class="specialty-filter" id="specialty-filter">
                        <div class="filter-btn active" data-specialty="all">All Specialties</div>
                        <div class="filter-btn" data-specialty="Cardiology">Cardiology</div>
                        <div class="filter-btn" data-specialty="Neurology">Neurology</div>
                        <div class="filter-btn" data-specialty="Orthopedics">Orthopedics</div>
                        <div class="filter-btn" data-specialty="Pediatrics">Pediatrics</div>
                        <div class="filter-btn" data-specialty="Dermatology">Dermatology</div>
                        <div class="filter-btn" data-specialty="Gynecology">Gynecology</div>
                        <div class="filter-btn" data-specialty="Dentistry">Dentistry</div>
                    </div>
                    
                    <div class="doctors-grid" id="doctors-grid">
                        <!-- Doctors will be added dynamically -->
                    </div>
                    
                    <div class="form-group">
                        <label for="appointment-date">Appointment Date</label>
                        <input type="date" id="appointment-date" required>
                        <div class="error" id="date-error">Please select a valid date</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Available Time Slots</label>
                        <div class="time-slots" id="time-slots">
                            <div class="time-slot" data-time="09:00">09:00 AM</div>
                            <div class="time-slot" data-time="10:00">10:00 AM</div>
                            <div class="time-slot" data-time="11:00">11:00 AM</div>
                            <div class="time-slot" data-time="12:00">12:00 PM</div>
                            <div class="time-slot" data-time="14:00">02:00 PM</div>
                            <div class="time-slot" data-time="15:00">03:00 PM</div>
                            <div class="time-slot" data-time="16:00">04:00 PM</div>
                            <div class="time-slot" data-time="17:00">05:00 PM</div>
                        </div>
                        <div class="error" id="time-error">Please select a time slot</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="symptoms">Symptoms</label>
                        <textarea id="symptoms" placeholder="Describe your symptoms" rows="3" required></textarea>
                        <div class="error" id="symptoms-error">Please describe your symptoms</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">Additional Notes</label>
                        <textarea id="notes" placeholder="Any additional information" rows="2"></textarea>
                    </div>
                    
                    <button type="submit" class="btn">Book Appointment</button>
                    
                    <!-- Dental Section -->
                    <div class="dental-section">
                        <h3 class="section-title"><i class="fas fa-tooth"></i> Dental Care Services</h3>
                        
                        <div class="dental-services">
                            <div class="service-item">
                                <div class="service-name">Teeth Cleaning</div>
                                <div class="service-desc">Professional cleaning to remove plaque and tartar</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">Dental Fillings</div>
                                <div class="service-desc">Restore damaged teeth with composite or amalgam fillings</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">Root Canal Treatment</div>
                                <div class="service-desc">Save infected teeth with advanced root canal procedures</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">Teeth Whitening</div>
                                <div class="service-desc">Professional whitening for a brighter, more confident smile</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">Dental Crowns</div>
                                <div class="service-desc">Restore damaged teeth with custom-made dental crowns</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">Orthodontic Treatment</div>
                                <div class="service-desc">Braces and aligners for teeth straightening</div>
                            </div>
                        </div>
                        
                        <div class="dental-info">
                            <h3><i class="fas fa-info-circle"></i> Why Choose Our Dental Services?</h3>
                            <ul>
                                <li>State-of-the-art dental equipment and technology</li>
                                <li>Pain-free treatments with advanced anesthesia techniques</li>
                                <li>Experienced dental specialists with international training</li>
                                <li>Sterilized instruments and strict hygiene protocols</li>
                                <li>Flexible payment options and insurance acceptance</li>
                            </ul>
                        </div>
                    </div>
                </form>
                
                <div id="verification-section" class="form">
                    <h3 style="text-align: center; margin-bottom: 20px; color: #4a6fc0;">Phone Verification</h3>
                    <p style="text-align: center; margin-bottom: 20px;">We've sent a verification code to your phone number. Please enter it below.</p>
                    
                    <div class="verification-step">
                        <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                    </div>
                    
                    <button type="button" class="btn" style="margin-top: 20px;" id="verify-btn">Verify & Confirm Appointment</button>
                    
                    <div class="resend">Didn't receive the code? <a href="#">Resend</a></div>
                </div>
            </div>
            
            <!-- Dental Services Page -->
            <div class="dental-page" id="dental-page">
                <a href="#" class="back-to-main" id="back-to-main">
                    <i class="fas fa-arrow-left" style="margin-right: 8px;"></i> Back to Main System
                </a>
                
                <div class="dental-hero">
                    <h2><i class="fas fa-tooth"></i> MedCare Pro Dental Center</h2>
                    <p>Experience world-class dental care with our team of specialists using the latest technology for pain-free treatments and beautiful, healthy smiles.</p>
                </div>
                
                <div class="dental-features">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-teeth"></i>
                        </div>
                        <div class="feature-title">Advanced Technology</div>
                        <div class="feature-desc">We use the latest dental technology including digital X-rays, intraoral cameras, and laser dentistry for precise diagnosis and treatment.</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <div class="feature-title">Expert Dentists</div>
                        <div class="feature-desc">Our team includes specialists in various fields of dentistry with years of experience and continuous training in the latest techniques.</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="feature-title">Sterile Environment</div>
                        <div class="feature-desc">We maintain the highest standards of sterilization and hygiene to ensure your safety and peace of mind during every visit.</div>
                    </div>
                </div>
                
                <h2 class="section-title"><i class="fas fa-list-alt"></i> Our Dental Services</h2>
                
                <div class="dental-services-grid">
                    <div class="dental-service-card">
                        <div class="service-header">
                            <h3>Teeth Cleaning</h3>
                        </div>
                        <div class="service-body">
                            <div class="service-price">৳ 1,500</div>
                            <ul class="service-details">
                                <li><i class="fas fa-check"></i> Professional plaque removal</li>
                                <li><i class="fas fa-check"></i> Tartar scaling</li>
                                <li><i class="fas fa-check"></i> Teeth polishing</li>
                                <li><i class="fas fa-check"></i> Fluoride treatment</li>
                                <li><i class="fas fa-check"></i> Oral hygiene instructions</li>
                            </ul>
                            <button class="service-btn" data-service="Teeth Cleaning">Book Appointment</button>
                        </div>
                    </div>
                    
                    <div class="dental-service-card">
                        <div class="service-header">
                            <h3>Dental Fillings</h3>
                        </div>
                        <div class="service-body">
                            <div class="service-price">৳ 2,000 - ৳ 4,000</div>
                            <ul class="service-details">
                                <li><i class="fas fa-check"></i> Tooth-colored composite fillings</li>
                                <li><i class="fas fa-check"></i> Cavity removal</li>
                                <li><i class="fas fa-check"></i> Local anesthesia</li>
                                <li><i class="fas fa-check"></i> Bite adjustment</li>
                                <li><i class="fas fa-check"></i> Polishing and finishing</li>
                            </ul>
                            <button class="service-btn" data-service="Dental Fillings">Book Appointment</button>
                        </div>
                    </div>
                    
                    <div class="dental-service-card">
                        <div class="service-header">
                            <h3>Root Canal Treatment</h3>
                        </div>
                        <div class="service-body">
                            <div class="service-price">৳ 5,000 - ৳ 8,000</div>
                            <ul class="service-details">
                                <li><i class="fas fa-check"></i> Digital X-ray diagnosis</li>
                                <li><i class="fas fa-check"></i> Local anesthesia</li>
                                <li><i class="fas fa-check"></i> Pulp removal</li>
                                <li><i class="fas fa-check"></i> Canal cleaning and shaping</li>
                                <li><i class="fas fa-check"></i> Obturation and sealing</li>
                            </ul>
                            <button class="service-btn" data-service="Root Canal Treatment">Book Appointment</button>
                        </div>
                    </div>
                    
                    <div class="dental-service-card">
                        <div class="service-header">
                            <h3>Teeth Whitening</h3>
                        </div>
                        <div class="service-body">
                            <div class="service-price">৳ 6,000 - ৳ 12,000</div>
                            <ul class="service-details">
                                <li><i class="fas fa-check"></i> In-office whitening</li>
                                <li><i class="fas fa-check"></i> Take-home whitening kits</li>
                                <li><i class="fas fa-check"></i> Custom trays</li>
                                <li><i class="fas fa-check"></i> Sensitivity management</li>
                                <li><i class="fas fa-check"></i> Maintenance instructions</li>
                            </ul>
                            <button class="service-btn" data-service="Teeth Whitening">Book Appointment</button>
                        </div>
                    </div>
                    
                    <div class="dental-service-card">
                        <div class="service-header">
                            <h3>Dental Crowns</h3>
                        </div>
                        <div class="service-body">
                            <div class="service-price">৳ 8,000 - ৳ 15,000</div>
                            <ul class="service-details">
                                <li><i class="fas fa-check"></i> Porcelain fused to metal</li>
                                <li><i class="fas fa-check"></i> All-ceramic crowns</li>
                                <li><i class="fas fa-check"></i> Zirconia crowns</li>
                                <li><i class="fas fa-check"></i> Tooth preparation</li>
                                <li><i class="fas fa-check"></i> Temporary crown</li>
                            </ul>
                            <button class="service-btn" data-service="Dental Crowns">Book Appointment</button>
                        </div>
                    </div>
                    
                    <div class="dental-service-card">
                        <div class="service-header">
                            <h3>Orthodontic Treatment</h3>
                        </div>
                        <div class="service-body">
                            <div class="service-price">৳ 50,000 - ৳ 120,000</div>
                            <ul class="service-details">
                                <li><i class="fas fa-check"></i> Metal braces</li>
                                <li><i class="fas fa-check"></i> Ceramic braces</li>
                                <li><i class="fas fa-check"></i> Invisalign clear aligners</li>
                                <li><i class="fas fa-check"></i> Regular adjustments</li>
                                <li><i class="fas fa-check"></i> Retention phase</li>
                            </ul>
                            <button class="service-btn" data-service="Orthodontic Treatment">Book Appointment</button>
                        </div>
                    </div>
                </div>
                
                <div class="dental-testimonials">
                    <h2 class="section-title"><i class="fas fa-comments"></i> Patient Testimonials</h2>
                    
                    <div class="testimonials-grid">
                        <div class="testimonial-card">
                            <div class="testimonial-text">
                                "I had my root canal treatment at MedCare Pro Dental Center, and I was amazed by how painless it was. The dentist explained everything step by step, which really eased my anxiety."
                            </div>
                            <div class="testimonial-author">
                                <div class="author-avatar">AR</div>
                                <div class="author-info">
                                    <h4>Ahmed Rahman</h4>
                                    <p>Root Canal Patient</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="testimonial-card">
                            <div class="testimonial-text">
                                "The teeth whitening treatment transformed my smile completely. The staff was professional and made sure I was comfortable throughout the process. Highly recommended!"
                            </div>
                            <div class="testimonial-author">
                                <div class="author-avatar">FK</div>
                                <div class="author-info">
                                    <h4>Fatima Khan</h4>
                                    <p>Teeth Whitening Patient</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="testimonial-card">
                            <div class="testimonial-text">
                                "My kids actually look forward to their dental checkups now! The pediatric dental team is amazing with children and makes the experience fun and educational."
                            </div>
                            <div class="testimonial-author">
                                <div class="author-avatar">NI</div>
                                <div class="author-info">
                                    <h4>Nadia Islam</h4>
                                    <p>Parent of Pediatric Patients</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dental-info">
                    <h3><i class="fas fa-info-circle"></i> Dental Care Tips</h3>
                    <ul>
                        <li>Brush your teeth twice a day with fluoride toothpaste</li>
                        <li>Floss daily to remove plaque between teeth</li>
                        <li>Limit sugary foods and drinks that can cause cavities</li>
                        <li>Visit your dentist regularly for check-ups and cleanings</li>
                        <li>Wear a mouthguard during sports to protect your teeth</li>
                        <li>Avoid using your teeth as tools to open packages</li>
                    </ul>
                </div>
                
                <div class="actions" style="margin-top: 40px;">
                    <button class="btn btn-primary" id="book-dental-appointment">
                        <i class="fas fa-calendar-plus" style="margin-right: 8px;"></i> Book Dental Appointment
                    </button>
                </div>
            </div>
            
            <!-- Confirmation Page -->
            <div class="confirmation-page" id="confirmation-page">
                <div class="header">
                    <div class="confirmation-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h1>Appointment Confirmed!</h1>
                    <p>Your appointment has been successfully scheduled</p>
                </div>
                
                <div class="appointment-info">
                    <h2><i class="fas fa-calendar-check"></i> Appointment Details</h2>
                    
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">Appointment ID</div>
                            <div class="info-value" id="conf-apt-id">APT-20240615-458</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Status</div>
                            <div class="info-value"><span class="status-badge">Confirmed</span></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Date</div>
                            <div class="info-value" id="conf-date">June 20, 2024</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Time</div>
                            <div class="info-value" id="conf-time">10:00 AM</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Patient Name</div>
                            <div class="info-value" id="conf-patient">Mohammad Rahman</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Phone Number</div>
                            <div class="info-value" id="conf-phone">+880 1712 345 678</div>
                        </div>
                    </div>
                    
                    <div class="info-item" style="grid-column: 1 / -1; margin-top: 15px;">
                        <div class="info-label">Symptoms</div>
                        <div class="info-value" id="conf-symptoms">Persistent headache, dizziness, and occasional blurred vision for the past week.</div>
                    </div>
                    
                    <div class="info-item" style="grid-column: 1 / -1;">
                        <div class="info-label">Additional Notes</div>
                        <div class="info-value" id="conf-notes">Patient has a history of migraines. No known allergies to medications.</div>
                    </div>
                </div>
                
                <div class="doctor-info">
                    <div class="doctor-image" id="conf-doctor-image">
                        <span>DR. IMAGE</span>
                    </div>
                    <div class="doctor-details">
                        <div class="doctor-name" id="conf-doctor-name">Dr. Ahmed Rahman</div>
                        <div class="doctor-specialty" id="conf-doctor-specialty">Cardiology Specialist</div>
                        <div class="doctor-experience" id="conf-doctor-experience">15 years of experience</div>
                        <div class="doctor-rating" id="conf-doctor-rating">
                            <i class="fas fa-star" style="color: #FFD700;"></i>
                            <i class="fas fa-star" style="color: #FFD700;"></i>
                            <i class="fas fa-star" style="color: #FFD700;"></i>
                            <i class="fas fa-star" style="color: #FFD700;"></i>
                            <i class="fas fa-star-half-alt" style="color: #FFD700;"></i>
                            4.8 (127 reviews)
                        </div>
                    </div>
                </div>
                
                <div class="qr-code">
                    <div class="info-label">Appointment QR Code</div>
                    <div class="map-placeholder">
                        <i class="fas fa-qrcode" style="font-size: 50px; margin-right: 10px;"></i>
                        <div>QR Code for quick check-in</div>
                    </div>
                    <p style="font-size: 14px; color: #666; margin-top: 10px;">Show this code at reception for quick check-in</p>
                </div>
                
                <div class="instructions">
                    <h3><i class="fas fa-info-circle"></i> Important Instructions</h3>
                    <ul>
                        <li>Please arrive <strong>15 minutes before</strong> your scheduled appointment time</li>
                        <li>Bring your <strong>ID card and insurance card</strong> (if applicable)</li>
                        <li>Carry any <strong>previous medical reports</strong> or test results</li>
                        <li>List all <strong>current medications</strong> you are taking</li>
                        <li>You will receive an <strong>SMS reminder</strong> 24 hours before your appointment</li>
                        <li>Call <strong>+880 2 5566 7788</strong> if you need to reschedule or cancel</li>
                    </ul>
                </div>
                
                <div class="map-container">
                    <div class="info-label" style="padding: 15px; background: #f8f9fa; border-bottom: 1px solid #e0e0e0;">
                        <i class="fas fa-map-marker-alt"></i> Clinic Location
                    </div>
                    <div class="map-placeholder">
                        <i class="fas fa-map-marked-alt" style="font-size: 40px; margin-right: 10px;"></i>
                        <div>
                            <div>MedCare Pro Clinic</div>
                            <div style="font-size: 14px; font-weight: normal;">123 Healthcare Avenue, Medical District, Dhaka 1212</div>
                        </div>
                    </div>
                </div>
                
                <div class="actions">
                    <button class="btn btn-primary" id="back-to-appointment">
                        <i class="fas fa-calendar-plus" style="margin-right: 8px;"></i> Book Another Appointment
                    </button>
                    <button class="btn btn-outline" id="print-confirmation">
                        <i class="fas fa-print" style="margin-right: 8px;"></i> Print Details
                    </button>
                    <button class="btn btn-secondary" id="download-confirmation">
                        <i class="fas fa-download" style="margin-right: 8px;"></i> Download PDF
                    </button>
                </div>
                
                <div class="footer">
                    <p>If you have any questions, please contact our support team at support@medcarepro.com or call +880 2 5566 7788</p>
                    <p style="margin-top: 10px;">&copy; 2024 MedCare Pro. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i> <span id="notification-text">Operation completed successfully!</span>
    </div>

    <!-- AI Agent -->
    <div class="ai-agent-container">
        <div class="ai-agent-chat" id="ai-agent-chat">
            <div class="ai-agent-header">
                <div class="ai-agent-title">
                    <i class="fas fa-robot"></i>
                    MedCare AI Assistant
                </div>
                <div class="ai-agent-close" id="ai-agent-close">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <div class="ai-agent-messages" id="ai-agent-messages">
                <div class="ai-message">
                    Hello! I'm your MedCare AI assistant. How can I help you today?
                </div>
            </div>
            <div class="ai-agent-input">
                <input type="text" id="ai-agent-input" placeholder="Type your message...">
                <button class="ai-agent-send" id="ai-agent-send">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        <div class="ai-agent-button" id="ai-agent-button">
            <i class="fas fa-robot"></i>
        </div>
    </div>

    <!-- Include jsPDF library for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Database simulation
            const database = {
                users: [],
                appointments: [],
                doctors: [
                    { id: 1, name: "Dr. Ahmed Rahman", specialty: "Cardiology", experience: "15 years", color: "#FF6B6B", rating: 4.8, available: true },
                    { id: 2, name: "Dr. Fatima Khan", specialty: "Neurology", experience: "12 years", color: "#4ECDC4", rating: 4.7, available: true },
                    { id: 3, name: "Dr. Hasan Mahmud", specialty: "Orthopedics", experience: "18 years", color: "#FFD166", rating: 4.9, available: true },
                    { id: 4, name: "Dr. Nadia Islam", specialty: "Pediatrics", experience: "10 years", color: "#6A0572", rating: 4.6, available: true },
                    { id: 5, name: "Dr. Omar Farooq", specialty: "Dermatology", experience: "8 years", color: "#118AB2", rating: 4.5, available: true },
                    { id: 6, name: "Dr. Sara Johnson", specialty: "Gynecology", experience: "14 years", color: "#06D6A0", rating: 4.8, available: true },
                    { id: 7, name: "Dr. Robert Chen", specialty: "Oncology", experience: "20 years", color: "#073B4C", rating: 4.9, available: true },
                    { id: 8, name: "Dr. Lisa Patterson", specialty: "Psychiatry", experience: "11 years", color: "#7209B7", rating: 4.7, available: true },
                    { id: 9, name: "Dr. James Wilson", specialty: "Cardiology", experience: "16 years", color: "#F72585", rating: 4.8, available: true },
                    { id: 10, name: "Dr. Emily Davis", specialty: "Endocrinology", experience: "9 years", color: "#3A86FF", rating: 4.6, available: true },
                    { id: 11, name: "Dr. Michael Brown", specialty: "Gastroenterology", experience: "13 years", color: "#FB5607", rating: 4.7, available: true },
                    { id: 12, name: "Dr. Sophia Miller", specialty: "Pulmonology", experience: "11 years", color: "#8338EC", rating: 4.5, available: true },
                    { id: 13, name: "Dr. William Taylor", specialty: "Rheumatology", experience: "17 years", color: "#FF006E", rating: 4.9, available: true },
                    { id: 14, name: "Dr. Olivia Anderson", specialty: "Nephrology", experience: "10 years", color: "#FF9E00", rating: 4.6, available: true },
                    { id: 15, name: "Dr. Benjamin Thomas", specialty: "Urology", experience: "14 years", color: "#32CD32", rating: 4.7, available: true },
                    // New Dental Doctors
                    { id: 16, name: "Dr. Sarah Williams", specialty: "Dentistry", experience: "12 years", color: "#9C27B0", rating: 4.8, available: true },
                    { id: 17, name: "Dr. David Martinez", specialty: "Dentistry", experience: "15 years", color: "#673AB7", rating: 4.9, available: true },
                    { id: 18, name: "Dr. Jennifer Lee", specialty: "Dentistry", experience: "8 years", color: "#3F51B5", rating: 4.7, available: true },
                    { id: 19, name: "Dr. Kevin Johnson", specialty: "Dentistry", experience: "11 years", color: "#2196F3", rating: 4.6, available: true },
                    { id: 20, name: "Dr. Maria Garcia", specialty: "Dentistry", experience: "14 years", color: "#03A9F4", rating: 4.8, available: true },
                    // Additional Medical Doctors
                    { id: 21, name: "Dr. Richard Moore", specialty: "Cardiology", experience: "19 years", color: "#00BCD4", rating: 4.9, available: true },
                    { id: 22, name: "Dr. Patricia White", specialty: "Pediatrics", experience: "13 years", color: "#009688", rating: 4.7, available: true },
                    { id: 23, name: "Dr. Daniel Harris", specialty: "Orthopedics", experience: "16 years", color: "#4CAF50", rating: 4.8, available: true },
                    { id: 24, name: "Dr. Susan Clark", specialty: "Gynecology", experience: "12 years", color: "#8BC34A", rating: 4.6, available: true },
                    { id: 25, name: "Dr. Matthew Lewis", specialty: "Neurology", experience: "14 years", color: "#CDDC39", rating: 4.7, available: true }
                ],
                // Alternative doctors database
                alternativeDoctors: [
                    { id: 101, name: "Dr. Abdullah Al Mamun", specialty: "Cardiology", clinic: "Apollo Hospitals", location: "Bashundhara, Dhaka", rating: 4.7, available: true },
                    { id: 102, name: "Dr. Nasreen Sultana", specialty: "Cardiology", clinic: "Square Hospital", location: "Mirpur, Dhaka", rating: 4.8, available: true },
                    { id: 103, name: "Dr. Kamal Hossain", specialty: "Neurology", clinic: "Labaid Hospital", location: "Dhanmondi, Dhaka", rating: 4.6, available: true },
                    { id: 104, name: "Dr. Farzana Ahmed", specialty: "Neurology", clinic: "United Hospital", location: "Gulshan, Dhaka", rating: 4.9, available: true },
                    { id: 105, name: "Dr. Rahim Khan", specialty: "Orthopedics", clinic: "Ibn Sina Hospital", location: "Dhanmondi, Dhaka", rating: 4.5, available: true },
                    { id: 106, name: "Dr. Sabrina Chowdhury", specialty: "Orthopedics", clinic: "Popular Hospital", location: "Shyamoli, Dhaka", rating: 4.7, available: true },
                    { id: 107, name: "Dr. Tanvir Ahmed", specialty: "Pediatrics", clinic: "Shishu Hospital", location: "Sher-e-Bangla Nagar, Dhaka", rating: 4.8, available: true },
                    { id: 108, name: "Dr. Nusrat Jahan", specialty: "Pediatrics", clinic: "Child Care Hospital", location: "Mirpur, Dhaka", rating: 4.6, available: true },
                    { id: 109, name: "Dr. Imran Hossain", specialty: "Dermatology", clinic: "Skin Care Center", location: "Gulshan, Dhaka", rating: 4.7, available: true },
                    { id: 110, name: "Dr. Sonia Rahman", specialty: "Dermatology", clinic: "Derma Solutions", location: "Banani, Dhaka", rating: 4.5, available: true },
                    { id: 111, name: "Dr. Abdul Karim", specialty: "Gynecology", clinic: "Women's Health Clinic", location: "Mohammadpur, Dhaka", rating: 4.8, available: true },
                    { id: 112, name: "Dr. Fatema Begum", specialty: "Gynecology", clinic: "Mother Care Hospital", location: "Uttara, Dhaka", rating: 4.7, available: true },
                    { id: 113, name: "Dr. Rajib Hasan", specialty: "Dentistry", clinic: "Dental Care Center", location: "Gulshan, Dhaka", rating: 4.6, available: true },
                    { id: 114, name: "Dr. Priya Saha", specialty: "Dentistry", clinic: "Smile Dental Clinic", location: "Banani, Dhaka", rating: 4.8, available: true },
                    { id: 115, name: "Dr. Anwar Hossain", specialty: "Dentistry", clinic: "Tooth Care Hospital", location: "Mirpur, Dhaka", rating: 4.7, available: true }
                ]
            };

            // Elements
            const loginToggle = document.getElementById('login-toggle');
            const registerToggle = document.getElementById('register-toggle');
            const appointmentToggle = document.getElementById('appointment-toggle');
            const dentalToggle = document.getElementById('dental-toggle');
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const appointmentForm = document.getElementById('appointment-form');
            const verificationSection = document.getElementById('verification-section');
            const dentalPage = document.getElementById('dental-page');
            const goToRegister = document.getElementById('go-to-register');
            const goToLogin = document.getElementById('go-to-login');
            const verifyBtn = document.getElementById('verify-btn');
            const backToMain = document.getElementById('back-to-main');
            const bookDentalAppointment = document.getElementById('book-dental-appointment');
            const serviceButtons = document.querySelectorAll('.service-btn');
            const notification = document.getElementById('notification');
            const doctorsGrid = document.getElementById('doctors-grid');
            const specialtyFilter = document.getElementById('specialty-filter');
            const doctorSearch = document.getElementById('doctor-search');
            const timeSlotsContainer = document.getElementById('time-slots');
            
            // Confirmation page elements
            const appointmentSystem = document.getElementById('appointment-system');
            const confirmationPage = document.getElementById('confirmation-page');
            const backToAppointmentBtn = document.getElementById('back-to-appointment');
            const printConfirmationBtn = document.getElementById('print-confirmation');
            const downloadConfirmationBtn = document.getElementById('download-confirmation');
            
            // AI Agent Elements
            const aiAgentButton = document.getElementById('ai-agent-button');
            const aiAgentChat = document.getElementById('ai-agent-chat');
            const aiAgentClose = document.getElementById('ai-agent-close');
            const aiAgentMessages = document.getElementById('ai-agent-messages');
            const aiAgentInput = document.getElementById('ai-agent-input');
            const aiAgentSend = document.getElementById('ai-agent-send');
            
            // Current user state
            let currentUser = null;
            let currentAppointment = null;
            
            // AI Agent State
            let aiAgentActive = false;
            let currentSpecialty = '';
            
            // Render doctors
            function renderDoctors(filter = 'all', searchTerm = '') {
                doctorsGrid.innerHTML = '';
                
                let filteredDoctors = filter === 'all' 
                    ? database.doctors 
                    : database.doctors.filter(doctor => doctor.specialty === filter);
                
                // Apply search filter
                if (searchTerm) {
                    const term = searchTerm.toLowerCase();
                    filteredDoctors = filteredDoctors.filter(doctor => 
                        doctor.name.toLowerCase().includes(term) || 
                        doctor.specialty.toLowerCase().includes(term)
                    );
                }
                
                if (filteredDoctors.length === 0) {
                    doctorsGrid.innerHTML = '<p class="no-doctors">No doctors found matching your criteria.</p>';
                    return;
                }
                
                filteredDoctors.forEach(doctor => {
                    const doctorCard = document.createElement('div');
                    doctorCard.className = 'doctor-card';
                    doctorCard.dataset.id = doctor.id;
                    
                    doctorCard.innerHTML = `
                        ${doctor.available ? '<div class="doctor-availability">Available</div>' : '<div class="doctor-availability" style="background:#f44336">Unavailable</div>'}
                        <div class="doctor-image" style="background-color: ${doctor.color};">
                            ${doctor.specialty.substring(0, 3)}
                        </div>
                        <div class="doctor-name">${doctor.name}</div>
                        <div class="doctor-specialty">${doctor.specialty}</div>
                        <div class="doctor-experience">${doctor.experience} experience</div>
                        <div class="doctor-rating">${'★'.repeat(Math.floor(doctor.rating))}${doctor.rating % 1 >= 0.5 ? '½' : ''} ${doctor.rating}</div>
                    `;
                    
                    if (doctor.available) {
                        doctorCard.addEventListener('click', function() {
                            document.querySelectorAll('.doctor-card').forEach(c => c.classList.remove('selected'));
                            this.classList.add('selected');
                        });
                    } else {
                        doctorCard.style.opacity = '0.7';
                        doctorCard.style.cursor = 'not-allowed';
                    }
                    
                    doctorsGrid.appendChild(doctorCard);
                });
            }
            
            // Initialize doctors
            renderDoctors();
            
            // Filter functionality
            specialtyFilter.addEventListener('click', function(e) {
                if (e.target.classList.contains('filter-btn')) {
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    renderDoctors(e.target.dataset.specialty, doctorSearch.value);
                }
            });
            
            // Search functionality
            doctorSearch.addEventListener('input', function() {
                const activeFilter = document.querySelector('.filter-btn.active').dataset.specialty;
                renderDoctors(activeFilter, this.value);
            });
            
            // Time slot selection
            timeSlotsContainer.addEventListener('click', function(e) {
                if (e.target.classList.contains('time-slot') && !e.target.classList.contains('unavailable')) {
                    document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
                    e.target.classList.add('selected');
                }
            });
            
            // Toggle forms
            loginToggle.addEventListener('click', function() {
                setActiveForm('login');
            });
            
            registerToggle.addEventListener('click', function() {
                setActiveForm('register');
            });
            
            appointmentToggle.addEventListener('click', function() {
                if (currentUser) {
                    setActiveForm('appointment');
                } else {
                    showNotification('Please login first to book an appointment!', 'error');
                    setActiveForm('login');
                }
            });
            
            dentalToggle.addEventListener('click', function() {
                showDentalPage();
            });
            
            goToRegister.addEventListener('click', function(e) {
                e.preventDefault();
                setActiveForm('register');
            });
            
            goToLogin.addEventListener('click', function(e) {
                e.preventDefault();
                setActiveForm('login');
            });
            
            // Back to main system from dental page
            backToMain.addEventListener('click', function(e) {
                e.preventDefault();
                showAppointmentSystem();
            });
            
            // Book dental appointment button
            bookDentalAppointment.addEventListener('click', function() {
                if (currentUser) {
                    setActiveForm('appointment');
                    // Filter to show only dental doctors
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    document.querySelector('.filter-btn[data-specialty="Dentistry"]').classList.add('active');
                    renderDoctors('Dentistry');
                } else {
                    showNotification('Please login first to book an appointment!', 'error');
                    setActiveForm('login');
                }
            });
            
            // Service buttons on dental page
            serviceButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const service = this.getAttribute('data-service');
                    if (currentUser) {
                        setActiveForm('appointment');
                        // Filter to show only dental doctors
                        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                        document.querySelector('.filter-btn[data-specialty="Dentistry"]').classList.add('active');
                        renderDoctors('Dentistry');
                        
                        // Pre-fill symptoms with the selected service
                        document.getElementById('symptoms').value = `Interested in ${service}`;
                        showNotification(`Selected ${service}. Please choose a dentist and appointment time.`);
                    } else {
                        showNotification('Please login first to book an appointment!', 'error');
                        setActiveForm('login');
                    }
                });
            });
            
            // Back to appointment system from confirmation page
            backToAppointmentBtn.addEventListener('click', function() {
                showAppointmentSystem();
            });
            
            // Print confirmation page
            printConfirmationBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Download confirmation page as PDF
            downloadConfirmationBtn.addEventListener('click', function() {
                downloadAsPDF();
            });
            
            // Form submissions
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateLoginForm()) {
                    const phone = document.getElementById('login-phone').value;
                    const password = document.getElementById('login-password').value;
                    
                    // Check if user exists
                    const user = database.users.find(u => u.phone === phone && u.password === password);
                    
                    if (user) {
                        currentUser = user;
                        showNotification('Login successful! Redirecting...');
                        setTimeout(() => setActiveForm('appointment'), 1500);
                    } else {
                        showNotification('Invalid phone number or password!', 'error');
                    }
                }
            });
            
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateRegisterForm()) {
                    const name = document.getElementById('full-name').value;
                    const phone = document.getElementById('register-phone').value;
                    const password = document.getElementById('register-password').value;
                    
                    // Check if user already exists
                    const existingUser = database.users.find(u => u.phone === phone);
                    
                    if (existingUser) {
                        showNotification('User with this phone number already exists!', 'error');
                        return;
                    }
                    
                    // Create new user
                    const newUser = {
                        id: database.users.length + 1,
                        name: name,
                        phone: phone,
                        password: password
                    };
                    
                    database.users.push(newUser);
                    currentUser = newUser;
                    
                    showNotification('Registration successful! Redirecting...');
                    setTimeout(() => setActiveForm('appointment'), 1500);
                }
            });
            
            appointmentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateAppointmentForm()) {
                    setActiveForm('verification');
                }
            });
            
            // Verification code input auto focus
            const verificationInputs = document.querySelectorAll('.verification-input');
            verificationInputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length === 1 && index < verificationInputs.length - 1) {
                        verificationInputs[index + 1].focus();
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value === '' && index > 0) {
                        verificationInputs[index - 1].focus();
                    }
                });
            });
            
            // Verify button
            verifyBtn.addEventListener('click', function() {
                setActiveForm('none');
                
                // Set appointment details
                const selectedDoctorCard = document.querySelector('.doctor-card.selected');
                if (!selectedDoctorCard) {
                    showNotification('Please select a doctor first!', 'error');
                    setActiveForm('appointment');
                    return;
                }
                
                const selectedTimeSlot = document.querySelector('.time-slot.selected');
                if (!selectedTimeSlot) {
                    showNotification('Please select a time slot first!', 'error');
                    setActiveForm('appointment');
                    return;
                }
                
                const doctorId = selectedDoctorCard.dataset.id;
                const selectedDoctor = database.doctors.find(d => d.id == doctorId);
                const appointmentDate = document.getElementById('appointment-date').value;
                const symptoms = document.getElementById('symptoms').value;
                const notes = document.getElementById('notes').value;
                
                // Create appointment
                currentAppointment = {
                    id: generateAppointmentId(),
                    patientId: currentUser.id,
                    patientName: currentUser.name,
                    patientPhone: currentUser.phone,
                    doctorId: selectedDoctor.id,
                    doctorName: selectedDoctor.name,
                    doctorSpecialty: selectedDoctor.specialty,
                    doctorExperience: selectedDoctor.experience,
                    doctorRating: selectedDoctor.rating,
                    doctorColor: selectedDoctor.color,
                    date: appointmentDate,
                    time: selectedTimeSlot.dataset.time,
                    symptoms: symptoms,
                    notes: notes,
                    status: 'confirmed'
                };
                
                database.appointments.push(currentAppointment);
                
                // Show confirmation page
                showConfirmationPage();
                showNotification('Appointment confirmed successfully!');
            });
            
            // Set minimum date for appointment to today
            const today = new Date();
            const yyyy = today.getFullYear();
            let mm = today.getMonth() + 1;
            let dd = today.getDate();
            
            if (mm < 10) mm = '0' + mm;
            if (dd < 10) dd = '0' + dd;
            
            const formattedToday = `${yyyy}-${mm}-${dd}`;
            document.getElementById('appointment-date').setAttribute('min', formattedToday);
            
            // Update time slots when date changes
            document.getElementById('appointment-date').addEventListener('change', function() {
                // In a real application, this would check doctor availability for the selected date
                // For demo purposes, we'll randomly mark some time slots as unavailable
                const timeSlots = document.querySelectorAll('.time-slot');
                timeSlots.forEach(slot => {
                    slot.classList.remove('unavailable');
                    // 20% chance of being unavailable for demo purposes
                    if (Math.random() < 0.2) {
                        slot.classList.add('unavailable');
                    }
                });
            });
            
            // Show dental page
            function showDentalPage() {
                appointmentSystem.style.display = 'none';
                confirmationPage.style.display = 'none';
                dentalPage.style.display = 'block';
                
                // Update toggle buttons
                [loginToggle, registerToggle, appointmentToggle, dentalToggle].forEach(toggle => {
                    toggle.classList.remove('active');
                });
                dentalToggle.classList.add('active');
            }
            
            // Show confirmation page
            function showConfirmationPage() {
                if (!currentAppointment) {
                    showNotification('No appointment data found!', 'error');
                    return;
                }
                
                // Populate confirmation page with appointment data
                document.getElementById('conf-apt-id').textContent = currentAppointment.id;
                document.getElementById('conf-date').textContent = formatDate(currentAppointment.date);
                document.getElementById('conf-time').textContent = currentAppointment.time;
                document.getElementById('conf-patient').textContent = currentAppointment.patientName;
                document.getElementById('conf-phone').textContent = currentAppointment.patientPhone;
                document.getElementById('conf-symptoms').textContent = currentAppointment.symptoms;
                document.getElementById('conf-notes').textContent = currentAppointment.notes;
                
                document.getElementById('conf-doctor-name').textContent = currentAppointment.doctorName;
                document.getElementById('conf-doctor-specialty').textContent = currentAppointment.doctorSpecialty + ' Specialist';
                document.getElementById('conf-doctor-experience').textContent = currentAppointment.doctorExperience + ' of experience';
                document.getElementById('conf-doctor-image').style.backgroundColor = currentAppointment.doctorColor;
                
                // Hide appointment system and show confirmation page
                appointmentSystem.style.display = 'none';
                dentalPage.style.display = 'none';
                confirmationPage.style.display = 'block';
                
                // Add animation to the confirmation icon
                const icon = document.querySelector('.confirmation-icon');
                icon.style.transform = 'scale(0)';
                icon.style.transition = 'transform 0.5s ease-out';
                
                setTimeout(() => {
                    icon.style.transform = 'scale(1)';
                }, 300);
            }
            
            // Show appointment system
            function showAppointmentSystem() {
                confirmationPage.style.display = 'none';
                dentalPage.style.display = 'none';
                appointmentSystem.style.display = 'block';
                setActiveForm('appointment');
            }
            
            // Download as PDF function
            function downloadAsPDF() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Add title
                doc.setFontSize(20);
                doc.setTextColor(74, 111, 192);
                doc.text('MedCare Pro - Appointment Confirmation', 105, 20, { align: 'center' });
                
                // Add appointment details
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                
                let yPosition = 40;
                
                // Appointment ID
                doc.text(`Appointment ID: ${currentAppointment.id}`, 20, yPosition);
                yPosition += 10;
                
                // Patient Info
                doc.text(`Patient: ${currentAppointment.patientName}`, 20, yPosition);
                yPosition += 10;
                doc.text(`Phone: ${currentAppointment.patientPhone}`, 20, yPosition);
                yPosition += 10;
                
                // Doctor Info
                doc.text(`Doctor: ${currentAppointment.doctorName}`, 20, yPosition);
                yPosition += 10;
                doc.text(`Specialty: ${currentAppointment.doctorSpecialty}`, 20, yPosition);
                yPosition += 10;
                
                // Date & Time
                doc.text(`Date: ${formatDate(currentAppointment.date)}`, 20, yPosition);
                yPosition += 10;
                doc.text(`Time: ${currentAppointment.time}`, 20, yPosition);
                yPosition += 10;
                
                // Symptoms
                doc.text(`Symptoms: ${currentAppointment.symptoms}`, 20, yPosition);
                yPosition += 10;
                
                // Notes
                if (currentAppointment.notes) {
                    doc.text(`Notes: ${currentAppointment.notes}`, 20, yPosition);
                    yPosition += 10;
                }
                
                // Status
                doc.text(`Status: Confirmed`, 20, yPosition);
                yPosition += 15;
                
                // Instructions
                doc.setFontSize(14);
                doc.setTextColor(74, 111, 192);
                doc.text('Important Instructions:', 20, yPosition);
                yPosition += 10;
                
                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                const instructions = [
                    "• Please arrive 15 minutes before your scheduled appointment time",
                    "• Bring your ID card and insurance card (if applicable)",
                    "• Carry any previous medical reports or test results",
                    "• List all current medications you are taking",
                    "• You will receive an SMS reminder 24 hours before your appointment",
                    "• Call +880 2 5566 7788 if you need to reschedule or cancel"
                ];
                
                instructions.forEach(instruction => {
                    if (yPosition > 270) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    doc.text(instruction, 25, yPosition);
                    yPosition += 7;
                });
                
                // Save the PDF
                doc.save(`Appointment-${currentAppointment.id}.pdf`);
                showNotification('PDF downloaded successfully!');
            }
            
            // AI Agent Functions
            // Toggle AI Agent
            aiAgentButton.addEventListener('click', function() {
                aiAgentChat.classList.toggle('active');
                aiAgentActive = aiAgentChat.classList.contains('active');
                
                if (aiAgentActive) {
                    aiAgentInput.focus();
                }
            });
            
            // Close AI Agent
            aiAgentClose.addEventListener('click', function() {
                aiAgentChat.classList.remove('active');
                aiAgentActive = false;
            });
            
            // Send message to AI Agent
            aiAgentSend.addEventListener('click', sendMessage);
            aiAgentInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Function to send message
            function sendMessage() {
                const message = aiAgentInput.value.trim();
                if (!message) return;
                
                // Add user message
                addMessage(message, 'user');
                aiAgentInput.value = '';
                
                // Show typing indicator
                showTypingIndicator();
                
                // Process message after a short delay
                setTimeout(() => {
                    processMessage(message);
                }, 1000);
            }
            
            // Function to add message to chat
            function addMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = sender === 'user' ? 'user-message' : 'ai-message';
                messageDiv.textContent = text;
                aiAgentMessages.appendChild(messageDiv);
                aiAgentMessages.scrollTop = aiAgentMessages.scrollHeight;
            }
            
            // Function to show typing indicator
            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'typing-indicator';
                typingDiv.innerHTML = `
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                `;
                aiAgentMessages.appendChild(typingDiv);
                aiAgentMessages.scrollTop = aiAgentMessages.scrollHeight;
                
                return typingDiv;
            }
            
            // Function to remove typing indicator
            function removeTypingIndicator(typingIndicator) {
                if (typingIndicator && typingIndicator.parentNode) {
                    typingIndicator.parentNode.removeChild(typingIndicator);
                }
            }
            
            // Function to process user message
            function processMessage(message) {
                // Remove typing indicator
                const typingIndicator = document.querySelector('.typing-indicator');
                removeTypingIndicator(typingIndicator);
                
                const lowerMessage = message.toLowerCase();
                
                // Check if user is asking about unavailable doctors
                if (lowerMessage.includes('unavailable') || 
                    lowerMessage.includes('not available') || 
                    lowerMessage.includes('alternative') ||
                    lowerMessage.includes('other doctor') ||
                    lowerMessage.includes('else')) {
                    
                    // Try to extract specialty from message
                    let specialty = extractSpecialty(message);
                    
                    if (!specialty) {
                        addMessage("I'd be happy to help you find alternative doctors. What specialty are you looking for? (e.g., cardiology, dentistry, etc.)");
                        return;
                    }
                    
                    currentSpecialty = specialty;
                    findAlternativeDoctors(specialty);
                    
                } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                    addMessage("Hello! I'm your MedCare AI assistant. I can help you find alternative doctors if your preferred doctor is unavailable. How can I assist you today?");
                    
                } else if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
                    addMessage("I can help you with:\n- Finding alternative doctors when your preferred doctor is unavailable\n- Providing information about other clinics\n- Suggesting doctors based on specialty\n\nJust tell me what you're looking for!");
                    
                } else if (lowerMessage.includes('thank')) {
                    addMessage("You're welcome! Is there anything else I can help you with?");
                    
                } else if (lowerMessage.includes('cardiology') || lowerMessage.includes('heart')) {
                    currentSpecialty = 'Cardiology';
                    findAlternativeDoctors('Cardiology');
                    
                } else if (lowerMessage.includes('dentist') || lowerMessage.includes('dental') || lowerMessage.includes('teeth')) {
                    currentSpecialty = 'Dentistry';
                    findAlternativeDoctors('Dentistry');
                    
                } else if (lowerMessage.includes('neurology') || lowerMessage.includes('brain') || lowerMessage.includes('nerve')) {
                    currentSpecialty = 'Neurology';
                    findAlternativeDoctors('Neurology');
                    
                } else if (lowerMessage.includes('orthopedic') || lowerMessage.includes('bone') || lowerMessage.includes('joint')) {
                    currentSpecialty = 'Orthopedics';
                    findAlternativeDoctors('Orthopedics');
                    
                } else if (lowerMessage.includes('pediatric') || lowerMessage.includes('child') || lowerMessage.includes('kid')) {
                    currentSpecialty = 'Pediatrics';
                    findAlternativeDoctors('Pediatrics');
                    
                } else if (lowerMessage.includes('dermatology') || lowerMessage.includes('skin')) {
                    currentSpecialty = 'Dermatology';
                    findAlternativeDoctors('Dermatology');
                    
                } else if (lowerMessage.includes('gynecology') || lowerMessage.includes('women') || lowerMessage.includes('female')) {
                    currentSpecialty = 'Gynecology';
                    findAlternativeDoctors('Gynecology');
                    
                } else {
                    addMessage("I'm not sure I understand. I specialize in helping you find alternative doctors when your preferred doctor is unavailable. You can ask me things like:\n\n- \"My cardiologist is unavailable, can you suggest others?\"\n- \"I need an alternative dentist\"\n- \"Find me other orthopedics doctors\"\n\nHow can I help you?");
                }
            }
            
            // Function to extract specialty from message
            function extractSpecialty(message) {
                const specialties = [
                    'cardiology', 'neurology', 'orthopedics', 'pediatrics', 
                    'dermatology', 'gynecology', 'dentistry', 'oncology',
                    'psychiatry', 'endocrinology', 'gastroenterology', 'pulmonology',
                    'rheumatology', 'nephrology', 'urology'
                ];
                
                const lowerMessage = message.toLowerCase();
                
                for (let specialty of specialties) {
                    if (lowerMessage.includes(specialty)) {
                        return specialty.charAt(0).toUpperCase() + specialty.slice(1);
                    }
                }
                
                // Check for common aliases
                if (lowerMessage.includes('heart')) return 'Cardiology';
                if (lowerMessage.includes('brain') || lowerMessage.includes('nerve')) return 'Neurology';
                if (lowerMessage.includes('bone') || lowerMessage.includes('joint')) return 'Orthopedics';
                if (lowerMessage.includes('child') || lowerMessage.includes('kid')) return 'Pediatrics';
                if (lowerMessage.includes('skin')) return 'Dermatology';
                if (lowerMessage.includes('women') || lowerMessage.includes('female')) return 'Gynecology';
                if (lowerMessage.includes('teeth') || lowerMessage.includes('dental')) return 'Dentistry';
                
                return null;
            }
            
            // Function to find alternative doctors
            function findAlternativeDoctors(specialty) {
                const alternativeDoctors = database.alternativeDoctors.filter(
                    doctor => doctor.specialty === specialty && doctor.available
                );
                
                if (alternativeDoctors.length === 0) {
                    addMessage(`I'm sorry, but I couldn't find any available ${specialty} specialists in other clinics at the moment. You might want to try checking back later or expanding your search to nearby areas.`);
                    return;
                }
                
                // Sort by rating (highest first)
                alternativeDoctors.sort((a, b) => b.rating - a.rating);
                
                // Limit to top 3 results
                const topDoctors = alternativeDoctors.slice(0, 3);
                
                addMessage(`I found ${alternativeDoctors.length} ${specialty} specialists available at other clinics. Here are the top ${topDoctors.length} recommendations:`);
                
                // Create container for alternative doctors
                const doctorsContainer = document.createElement('div');
                doctorsContainer.className = 'alternative-doctors';
                
                topDoctors.forEach(doctor => {
                    const doctorDiv = document.createElement('div');
                    doctorDiv.className = 'alternative-doctor';
                    doctorDiv.innerHTML = `
                        <div class="alternative-doctor-image">
                            ${doctor.name.split(' ').map(n => n[0]).join('')}
                        </div>
                        <div class="alternative-doctor-info">
                            <div class="alternative-doctor-name">${doctor.name}</div>
                            <div class="alternative-doctor-specialty">${doctor.specialty} • ${doctor.rating} ★</div>
                            <div class="alternative-doctor-clinic">${doctor.clinic}, ${doctor.location}</div>
                        </div>
                    `;
                    
                    // Add click event to select this doctor
                    doctorDiv.addEventListener('click', function() {
                        selectAlternativeDoctor(doctor);
                    });
                    
                    doctorsContainer.appendChild(doctorDiv);
                });
                
                aiAgentMessages.appendChild(doctorsContainer);
                aiAgentMessages.scrollTop = aiAgentMessages.scrollHeight;
                
                addMessage("Click on any doctor to select them, or let me know if you'd like to see more options.");
            }
            
            // Function to handle selection of alternative doctor
            function selectAlternativeDoctor(doctor) {
                addMessage(`Great choice! You've selected ${doctor.name} from ${doctor.clinic}.`);
                
                // Show typing indicator
                const typingIndicator = showTypingIndicator();
                
                setTimeout(() => {
                    removeTypingIndicator(typingIndicator);
                    
                    addMessage(`Would you like me to:\n1. Show you the contact information for ${doctor.clinic}\n2. Help you book an appointment with ${doctor.name}\n3. Find more ${doctor.specialty} specialists\n\nJust let me know what you'd prefer!`);
                }, 1500);
            }
            
            // Add event listener to detect when a doctor is unavailable
            document.addEventListener('click', function(e) {
                // Check if user clicked on an unavailable doctor
                if (e.target.closest('.doctor-card') && e.target.closest('.doctor-card').querySelector('.doctor-availability').style.background === '#f44336') {
                    const doctorCard = e.target.closest('.doctor-card');
                    const doctorName = doctorCard.querySelector('.doctor-name').textContent;
                    const doctorSpecialty = doctorCard.querySelector('.doctor-specialty').textContent;
                    
                    // Open AI agent and suggest alternatives
                    if (!aiAgentActive) {
                        aiAgentChat.classList.add('active');
                        aiAgentActive = true;
                    }
                    
                    // Show typing indicator
                    const typingIndicator = showTypingIndicator();
                    
                    setTimeout(() => {
                        removeTypingIndicator(typingIndicator);
                        
                        addMessage(`I see that ${doctorName} (${doctorSpecialty}) is currently unavailable. Would you like me to find alternative ${doctorSpecialty} specialists at other clinics?`);
                        
                        currentSpecialty = doctorSpecialty;
                    }, 1000);
                }
            });
            
            // Helper functions
            function setActiveForm(formName) {
                // Reset all forms
                [loginToggle, registerToggle, appointmentToggle, dentalToggle].forEach(toggle => {
                    toggle.classList.remove('active');
                });
                
                [loginForm, registerForm, appointmentForm, verificationSection].forEach(form => {
                    form.classList.remove('active');
                });
                
                // Activate selected form
                switch(formName) {
                    case 'login':
                        loginToggle.classList.add('active');
                        loginForm.classList.add('active');
                        break;
                    case 'register':
                        registerToggle.classList.add('active');
                        registerForm.classList.add('active');
                        break;
                    case 'appointment':
                        appointmentToggle.classList.add('active');
                        appointmentForm.classList.add('active');
                        break;
                    case 'verification':
                        verificationSection.classList.add('active');
                        break;
                }
            }
            
            function showNotification(message, type = 'success') {
                const notificationText = document.getElementById('notification-text');
                notificationText.textContent = message;
                
                if (type === 'error') {
                    notification.style.background = '#f44336';
                } else {
                    notification.style.background = '#4caf50';
                }
                
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }
            
            function validateLoginForm() {
                const phone = document.getElementById('login-phone').value;
                const password = document.getElementById('login-password').value;
                let isValid = true;
                
                if (!phone || phone.length < 10) {
                    document.getElementById('login-phone-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('login-phone-error').style.display = 'none';
                }
                
                if (!password) {
                    document.getElementById('login-password-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('login-password-error').style.display = 'none';
                }
                
                return isValid;
            }
            
            function validateRegisterForm() {
                const name = document.getElementById('full-name').value;
                const phone = document.getElementById('register-phone').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                let isValid = true;
                
                if (!name) {
                    document.getElementById('name-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('name-error').style.display = 'none';
                }
                
                if (!phone || phone.length < 10) {
                    document.getElementById('register-phone-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('register-phone-error').style.display = 'none';
                }
                
                if (!password || password.length < 6) {
                    document.getElementById('password-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('password-error').style.display = 'none';
                }
                
                if (password !== confirmPassword) {
                    document.getElementById('confirm-password-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('confirm-password-error').style.display = 'none';
                }
                
                return isValid;
            }
            
            function validateAppointmentForm() {
                const selectedDoctor = document.querySelector('.doctor-card.selected');
                const date = document.getElementById('appointment-date').value;
                const selectedTime = document.querySelector('.time-slot.selected');
                const symptoms = document.getElementById('symptoms').value;
                let isValid = true;
                
                if (!selectedDoctor) {
                    showNotification('Please select a doctor!', 'error');
                    isValid = false;
                }
                
                if (!date) {
                    document.getElementById('date-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('date-error').style.display = 'none';
                }
                
                if (!selectedTime) {
                    document.getElementById('time-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('time-error').style.display = 'none';
                }
                
                if (!symptoms) {
                    document.getElementById('symptoms-error').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('symptoms-error').style.display = 'none';
                }
                
                return isValid;
            }
            
            function generateAppointmentId() {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const random = Math.floor(Math.random() * 1000);
                return `${year}${month}${day}-${random}`;
            }
            
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', options);
            }
        });
    </script>
</body>
</html>